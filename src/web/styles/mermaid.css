/* Mermaid diagram styling */
.mermaid-container {
  /* Ensure diagrams are centered and responsive */
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 200px;
  margin: 1rem 0;
  padding: 1rem;
  background: var(--color-canvas-default, #ffffff);
  border: 1px solid var(--color-border-default, #d0d7de);
  border-radius: 6px;
  overflow-x: auto;
}

.dark .mermaid-container {
  background: var(--color-canvas-default, #0d1117);
  border-color: var(--color-border-default, #30363d);
}

/* Mermaid SVG styling */
.mermaid-container svg {
  max-width: 100%;
  height: auto;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
}

/* Dark theme adjustments for Mermaid */
.dark .mermaid-container svg {
  filter: invert(1) hue-rotate(180deg);
}

.dark .mermaid-container svg text {
  fill: #f0f6fc !important;
}

.dark .mermaid-container svg .node rect,
.dark .mermaid-container svg .node circle,
.dark .mermaid-container svg .node ellipse,
.dark .mermaid-container svg .node polygon {
  fill: #21262d !important;
  stroke: #30363d !important;
}

.dark .mermaid-container svg .edgePath path {
  stroke: #7d8590 !important;
}

.dark .mermaid-container svg .arrowheadPath {
  fill: #7d8590 !important;
  stroke: #7d8590 !important;
}

/* Loading and error states */
.mermaid-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100px;
  color: var(--color-fg-muted, #656d76);
  font-size: 14px;
}

.mermaid-error {
  padding: 1rem;
  background: var(--color-danger-subtle, #ffebe9);
  border: 1px solid var(--color-danger-muted, #f85149);
  border-radius: 6px;
  color: var(--color-danger-fg, #cf222e);
  font-size: 14px;
}

.dark .mermaid-error {
  background: var(--color-danger-subtle, #490202);
  border-color: var(--color-danger-muted, #f85149);
  color: var(--color-danger-fg, #f85149);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .mermaid-container {
    padding: 0.5rem;
    margin: 0.5rem 0;
  }
  
  .mermaid-container svg {
    font-size: 12px;
  }
}

/* Ensure diagrams work well in prose content */
.prose .mermaid-container {
  margin: 1.5rem 0;
  max-width: none;
}

/* Animation for loading state */
@keyframes mermaid-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.mermaid-loading .animate-pulse {
  animation: mermaid-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}